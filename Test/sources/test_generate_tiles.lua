--[[
#ifndef SMART_ROOM_DATA_H
#define SMART_ROOM_DATA_H

/* coordinates x0,y0,x1,y1 of main rectangle for each tile */
extern const double tiles_coords1[104][4];
/* coordinates x0,y0,x1,y1 of secondary rectangle for tile 52 */
extern const double tiles_coords2_52[4];
/* coordinates x0,y0 of theoretical square (uncut tile) for each tile */
extern const double tiles_x0y0[104][2];
/* neigbors for each tile  (-1 if no neighbor in a given direction) */
extern const int tiles_neighbors[104][4];
/* sensors positions for each tile (in virtual local coordinates) */
extern const double sensors_xy[104][4][2];
/* offline tiles: tiles that are known to be removed, not instrumented, or dead */
const int tiles_state[104];

#endif
--]]

zeros={
 ['1']= {2427.401098901099, 1303.8626373626373, 2086.2087912087914, 836.63186813186815},
 ['2']= {2234.8186813186812, 2089.335164835165, 2203.5824175824177, 1363.5274725274726}, 
 ['3']= {2255.4945054945056, 1217.4890109890109, 2671.0934065934066, 1669.3461538461538}, 
 ['4']= {2456.0109890109889, 1629.6483516483515, 1493.7747252747254, 1176.5}, 
 ['5']= {1716.5494505494505, 1801.1153846153845, 253.92857142857142, 2164.6483516483518}, 
 ['6']= {1549.1153846153845, 1920.9395604395604, 1637.0824175824175, 1716.1153846153845}, 
 ['7']= {1811.9890109890109, 1023.0, 1920.9395604395604, 1943.9285714285713}, 
 ['8']= {1903.6593406593406, 724.78571428571433, 1083.868131868132, 2069.6263736263736}, 
 ['9']= {2000.8846153846155, 1234.2032967032967, 2246.2032967032969, 1350.5109890109891}, 
 ['10']= {1655.8736263736264, 1534.434065934066, 2608.5714285714284, 1813.4175824175825}, 
 ['11']= {2348.2362637362639, 1335.3736263736264, 1972.8736263736264, 1971.2307692307693}, 
 ['12']= {2543.967032967033, 1754.7417582417581, 1604.4835164835165, 1798.3406593406594}, 
 ['13']= {1426.5384615384614, 2190.5109890109889, 1692.9835164835165, 1696.401098901099}, 
 ['14']= {2198.5439560439559, 1797.6373626373627, 1888.6043956043957, 1029.5494505494505}, 
 ['15']= {2093.1758241758243, 1766.368131868132, 1275.1593406593406, 907.77472527472526}, 
 ['16']= {1172.8791208791208, 1534.8956043956043, 2524.2967032967031, 1655.0879120879122}, 
 ['17']= {1824.131868131868, 1238.7032967032967, 1605.9725274725274, 1501.7417582417581}, 
 ['18']= {2045.467032967033, 2758.3296703296705, 2275.3791208791208, 2120.9780219780218}, 
 ['19']= {2294.4198895027625, 1504.4033149171271, 1555.7182320441989, 1375.1602209944751}, 
 ['20']= {1472.2417582417581, 1319.8791208791208, 1383.901098901099, 1794.934065934066}, 
 ['21']= {1682.9065934065934, 2421.0054945054944, 1587.9890109890109, 2319.7417582417584}, 
 ['22']= {2417.164835164835, 2006.2527472527472, 2133.9065934065934, 1462.8571428571429}, 
 ['23']= {2148.9725274725274, 937.42857142857144, 1388.7307692307693, 2453.802197802198}, 
 ['24']= {1618.9505494505495, 1955.9945054945056, 1678.2472527472528, 2056.0934065934066}, 
 ['25']= {1808.6758241758241, 1441.3956043956043, 1023.0, 1681.9065934065934}, 
 ['26']= {2727.7637362637361, 1149.8901098901099, 2147.9835164835163, 1457.5274725274726}, 
 ['27']= {2231.5879120879122, 1682.5164835164835, 2166.5769230769229, 1489.8021978021977}, 
 ['28']= {2001.8453038674033, 1271.0994475138123, 1773.5027624309391, 2101.0165745856352}, 
 ['29']= {1223.9116022099447, 1003.6961325966851, 1741.8121546961327, 1539.5745856353592}, 
 ['30']= {2032.6703296703297, 2061.2472527472528, 2168.1428571428573, 1725.9835164835165}, 
 ['31']= {2649.7802197802198, 1233.8791208791208, 1637.5824175824175, 1794.631868131868}, 
 ['32']= {1602.3646408839779, 1898.3756906077349, 1419.1657458563536, 2223.9005524861877}, 
 ['33']= {1633.0384615384614, 1780.3516483516485, 2052.7802197802198, 1704.9175824175825}, 
 ['34']= {2579.7307692307691, 1249.2307692307693, 1387.8241758241759, 1906.0164835164835}, 
 ['35']= {2805.8516483516482, 1820.4945054945056, 1624.598901098901, 1376.131868131868}, 
 ['36']= {1634.2582417582419, 1474.0219780219779, 1809.9175824175825, 1563.2307692307693}, 
 ['37']= {1818.4285714285713, 1645.0824175824175, 1859.5164835164835, 1293.2362637362637}, 
 ['38']= {2569.7142857142858, 1609.8516483516485, 2618.3626373626375, 2576.6263736263736}, 
 ['39']= {1119.131868131868, 1835.5879120879122, 1980.8461538461538, 1471.0384615384614}, 
 ['40']= {2061.5494505494507, 1653.2747252747254, 1063.0384615384614, 849.25274725274721}, 
 ['41']= {1404.7857142857142, 1774.5054945054944, 1408.9175824175825, 1616.8296703296703}, 
 ['42']= {1023.0, 1293.4395604395604, 2209.1538461538462, 1492.868131868132}, 
 ['43']= {2084.5109890109889, 1644.4780219780221, 2052.2362637362639, 2418.9945054945056}, 
 ['44']= {2224.5027624309391, 1371.9060773480662, 1568.8176795580112, 1763.4309392265193}, 
 ['45']= {1830.7142857142858, 818.14285714285711, 2080.401098901099, 1964.2032967032967}, 
 ['46']= {2531.0439560439559, 1312.5494505494505, 2112.7142857142858, 1447.0714285714287}, 
 ['47']= {2162.9395604395604, 2398.1153846153848, 1581.5054945054944, 1472.9065934065934}, 
 ['48']= {2821.6373626373625, 2018.2692307692307, 2049.1923076923076, 1953.5274725274726}, 
 ['49']= {2721.4615384615386, 1482.5934065934066, 1736.7802197802198, 1934.6428571428571}, 
 ['50']= {1440.7362637362637, 968.41208791208794, 1785.6043956043957, 2410.9725274725274}, 
 ['51']= {2059.2252747252746, 1703.6428571428571, 2281.9560439560441, 1133.1593406593406}, 
 ['52']= {2138.7307692307691, 2253.1868131868132, 2594.2252747252746, 1319.098901098901}, 
 ['53']= {1764.1648351648353, 1816.9725274725274, 642.64285714285711, 1344.0219780219779}, 
 ['54']= {2265.9502762430939, 1198.2707182320441, 1860.3756906077349, 1789.46408839779}, 
 ['55']= {1830.6813186813188, 1902.1538461538462, 2540.4450549450548, 2227.868131868132}, 
 ['71']= {2293.794117647059, 2165.4029411764704, 2081.4147058823528, 1343.3}, 
 ['72']= {1961.0558823529411, 2622.7676470588235, 2396.6941176470586, 1844.879411764706}, 
 ['73']= {889.0617647058823, 1819.9205882352942, 1946.2941176470588, 1456.7647058823529}, 
 ['74']= {1841.8764705882354, 1160.1970588235295, 1435.0970588235293, 1133.8941176470589}, 
 ['75']= {1539.9970588235294, 2112.1999999999998, 2062.7205882352941, 2578.7352941176468}, 
 ['76']= {1910.8709677419354, 1700.8973607038124, 1894.83284457478, 1630.6041055718474}, 
 ['77']= {1561.0586510263929, 2250.0234604105572, 1983.3167155425219, 976.43988269794727}, 
 ['78']= {2101.6011730205278, 1565.733137829912, 2218.9794721407625, 2048.74780058651}, 
 ['80']= {2184.6549707602339, 1600.7309941520468, 892.43859649122805, 1187.312865497076}, 
 ['81']= {2031.0409356725147, 1902.3450292397661, 2430.2309941520466, 1892.7836257309941}, 
 ['85']= {2389.7617647058823, 1853.1147058823528, 2234.7294117647057, 1690.3911764705883}, 
 ['90']= {1362.0850439882697, 2380.1114369501465, 1206.2082111436951, 1545.2844574780058}
}
 
zerosNew={
  ['1']={2416.59,1316.56,2102.5,834.38},
  ['2']={2241.66,2099.15,2195.64,1299.66},
  ['3']={2248,1220,2668,1663},
  ['4']={2448.37,1632.41,1491.43,1178.02},
  ['5']={1718.99,1803.23,254.98,2170.99},
  ['6']={1541.37,1924.82,1634.7,1726.13},
  ['7']={1793.69,1050.98,1917.85,1943.42},
  ['8']={1900.63,729.87,1085.98,2065.96},
  ['9']={2025.13,1250.96,2249.96,1389.22},
  ['10']={1649.4,1534.43,2607.17,1836.87},
  ['11']={2361.86,1326.69,1969.85,1974.25},
  ['12']={2550.68,1750.18,1611.35,1821.13},
  ['13']={1421.8,2185.3,1682.92,1741.2},
  ['14']={2196.9,1812.76,1887.98,1023.84},
  ['15']={2089.74,1781.85,1281.96,908.54},
  ['16']={1176.71,1530.99,2530.52,1669.99},
  ['17']={1821.77,1245.93,1621.58,1518.55},
  ['18']={2047.74,2752.33,2275.9,2119.66},
  ['19']={2286.67,1515.09,1543.84,1376.67},
  ['20']={1471.93,1326.18,1390.79,1803.76},
  ['21']={1654.91,2434.93,1595.96,2313.34},
  ['23']={2165.92,964.59,1415.76,2448.86},
  ['24']={1652.81,1974.56,1662.88,2079.88},
  ['25']={1807.87,1455.85,1023,1678.37},
  ['26']={2715,1150,2128,1451},
  ['27']={2239.98,1675.88,2149.73,1505.88},
  ['28']={1995.98,1279.95,1777.92,2126},
  ['29']={1219.58,1001.82,1747.73,1541.85},
  ['30']={2031.23,2087.96,2231.83,1730.55},
  ['31']={2692,1253,1648,1792},
  ['32']={1608.35,1895.75,1420.4,2228.13},
  ['33']={1633.75,1787.93,2065.75,1713.94},
  ['34']={2578.67,1248.65,1398.48,1905.07},
  ['35']={2799.94,1816.9,1644.09,1383},
  ['36']={1622.87,1507.29,1818.62,1564.93},
  ['37']={1802.79,1655.73,1869.4,1280.84},
  ['38']={2565.8,1615.9,2614.9,2590.66},
  ['39']={1100.94,1861.87,1975.93,1483.38},
  ['40']={2064.36,1689.95,1059.45,859.81},
  ['41']={1399.88,1782.62,1417.94,1617.88},
  ['42']={1022.92,1279.95,2209.69,1498.58},
  ['43']={2078.1,1639.78,2059.95,2429.16},
  ['44']={2212.8,1369.63,1564.95,1770.94},
  ['45']={1838.78,806.18,2074.04,1982.99},
  ['46']={2528.91,1311.95,2113.69,1456.7},
  ['47']={2163.03,2376.71,1577.43,1508.51},
  ['48']={2806.5,2034.64,2059.35,1943.21},
  ['49']={2711.91,1486.2,1730.76,3105.68},
  ['50']={1474.35,1023,1779.15,2419.93},
  ['51']={2055,1703,2278,1138},
  ['52']={3181.36,2254.46,2648.55,1328.37},
  ['53']={1757.25,1815.87,639.59,1335.77},
  ['54']={2270.83,1201.64,1869.7,1800.81},
  ['55']={1812.44,1894.64,2548.78,2222.68},
  ['56']={2261.96,1589.95,1143.87,951.12},
  ['57']={3909.86,1406.93,2340.96,885.44},
  ['58']={2761.61,1129.33,1744.45,3901.93},
  ['60']={2419,3072,1060,1723},
  ['61']={2478.48,1898.99,2220.79,1982.72},
  ['63']={1673.95,1472.99,1696.58,1772.93},
  ['64']={2093.77,2051.82,2109.54,1088.79},
  ['66']={1900.88,1535.92,1278.99,1992.92},
  ['67']={2598.94,3919.39,1944.8,1452.79},
  ['69']={2313.92,1801.32,1266.59,1278.98},
  ['70']={2212.86,2124.62,2163.89,947.7},
  ['71']={2288.48,2158.36,2076.91,1346.93},
  ['72']={1959.14,2634.76,2398.94,1856.49},
  ['73']={872.61,1825.06,1928.92,1460.61},
  ['74']={1844.98,1168.6,1443.33,1136.87},
  ['75']={1537,2117,2054,2570},
  ['76']={1906.35,1707.88,1896.82,1635.76},
  ['77']={1558.72,2248.95,1982.31,975.91},
  ['79']={3296.96,3920.47,2735.69,2659.65},
  ['80']={2186,1610,892,1192},
  ['81']={2025,1906,2426,1890},
  ['84']={3908.63,2020.97,3903.44,2006.31},
  ['85']={2388.38,1845.78,2234.87,1693.37},
  ['89']={3022.54,2559.25,3275.11,3905.3},
  ['90']={1344.71,2382.82,1203.03,1544.85},
  ['91']={2724,3379,3584,2639},
  ['93']={2154.94,1743.87,1903.84,1856.25},
  ['95']={2756.73,2773.93,3912.84,3268.79},
  ['96']={3245.72,2832.63,3296.57,3283.79},
  ['99']={3097.75,2054.58,2119.55,3408.86},
  ['100']={3032.2,3064.87,3393.66,3456.91}
}

--const double tiles_coords1[104][4]={
tiles_coord={
{ 0.0 , 0 , 0.6 , 0.545 },
{ 0.605 , 0 , 1.205 , 0.545 },
{ 1.21 , 0 , 1.81 , 0.545 },
{ 1.815 , 0 , 2.415 , 0.545 },
{ 2.42 , 0 , 3.02 , 0.545 },
{ 3.025 , 0 , 3.625 , 0.545 },
{ 3.63 , 0 , 4.23 , 0.545 },
{ 4.235 , 0 , 4.835 , 0.545 },
{ 4.84 , 0 , 5.44 , 0.545 },
{ 5.445 , 0 , 6.045 , 0.545 },
{ 6.05 , 0 , 6.65 , 0.545 },
{ 0.0 , 0.55 , 0.6 , 1.15 },
{ 0.605 , 0.55 , 1.205 , 1.15 },
{ 1.21 , 0.55 , 1.81 , 1.15 },
{ 1.815 , 0.55 , 2.415 , 1.15 },
{ 2.42 , 0.55 , 3.02 , 1.15 },
{ 3.025 , 0.55 , 3.625 , 1.15 },
{ 3.63 , 0.55 , 4.23 , 1.15 },
{ 4.235 , 0.55 , 4.835 , 1.15 },
{ 4.84 , 0.55 , 5.44 , 1.15 },
{ 5.445 , 0.55 , 6.045 , 1.15 },
{ 6.05 , 0.55 , 6.65 , 1.15 },
{ 0.0 , 1.155 , 0.6 , 1.755 },
{ 0.605 , 1.155 , 1.205 , 1.755 },
{ 1.21 , 1.155 , 1.81 , 1.755 },
{ 1.815 , 1.155 , 2.415 , 1.755 },
{ 2.42 , 1.155 , 3.02 , 1.755 },
{ 3.025 , 1.155 , 3.625 , 1.755 },
{ 3.63 , 1.155 , 4.23 , 1.755 },
{ 4.235 , 1.155 , 4.835 , 1.755 },
{ 4.84 , 1.155 , 5.44 , 1.755 },
{ 5.445 , 1.155 , 6.045 , 1.755 },
{ 6.05 , 1.155 , 6.65 , 1.755 },
{ 0.0 , 1.76 , 0.6 , 2.36 },
{ 0.605 , 1.76 , 1.205 , 2.36 },
{ 1.21 , 1.76 , 1.81 , 2.36 },
{ 1.815 , 1.76 , 2.415 , 2.36 },
{ 2.42 , 1.76 , 3.02 , 2.36 },
{ 3.025 , 1.76 , 3.625 , 2.36 },
{ 3.63 , 1.76 , 4.23 , 2.36 },
{ 4.235 , 1.76 , 4.835 , 2.36 },
{ 4.84 , 1.76 , 5.44 , 2.36 },
{ 5.445 , 1.76 , 6.045 , 2.36 },
{ 6.05 , 1.76 , 6.65 , 2.36 },
{ 0.0 , 2.365 , 0.6 , 2.965 },
{ 0.605 , 2.365 , 1.205 , 2.965 },
{ 1.21 , 2.365 , 1.81 , 2.965 },
{ 1.815 , 2.365 , 2.415 , 2.965 },
{ 2.42 , 2.365 , 3.02 , 2.965 },
{ 3.025 , 2.365 , 3.625 , 2.965 },
{ 3.63 , 2.365 , 4.23 , 2.965 },
{ 4.235 , 2.365 , 4.651 , 2.965 },
{ 4.84 , 2.365 , 5.44 , 2.965 },
{ 5.445 , 2.365 , 6.045 , 2.965 },
{ 6.05 , 2.365 , 6.65 , 2.965 },
{ 4.84 , 2.97 , 5.44 , 3.57 },
{ 5.445 , 2.97 , 6.045 , 3.57 },
{ 6.05 , 2.97 , 6.65 , 3.57 },
{ 4.84 , 3.575 , 5.44 , 4.175 },
{ 5.445 , 3.575 , 6.045 , 4.175 },
{ 6.05 , 3.575 , 6.65 , 4.175 },
{ 4.84 , 4.18 , 5.44 , 4.78 },
{ 5.445 , 4.18 , 6.045 , 4.78 },
{ 6.05 , 4.18 , 6.65 , 4.78 },
{ 4.84 , 4.785 , 5.44 , 5.385 },
{ 5.445 , 4.785 , 6.045 , 5.385 },
{ 6.05 , 4.785 , 6.65 , 5.385 },
{ 4.84 , 5.39 , 5.44 , 5.99 },
{ 5.445 , 5.39 , 6.045 , 5.99 },
{ 6.05 , 5.39 , 6.65 , 5.99 },
{ 0.0 , 3.08 , 0.6 , 3.68 },
{ 0.605 , 3.08 , 1.205 , 3.68 },
{ 1.21 , 3.08 , 1.81 , 3.68 },
{ 1.815 , 3.08 , 2.415 , 3.68 },
{ 0.0 , 3.685 , 0.6 , 4.285 },
{ 0.605 , 3.685 , 1.205 , 4.285 },
{ 1.21 , 3.685 , 1.81 , 4.285 },
{ 1.815 , 3.685 , 2.415 , 4.285 },
{ 0.0 , 4.29 , 0.6 , 4.89 },
{ 0.605 , 4.29 , 1.205 , 4.89 },
{ 1.21 , 4.29 , 1.81 , 4.89 },
{ 1.815 , 4.29 , 2.415 , 4.89 },
{ 0.0 , 4.895 , 0.6 , 5.495 },
{ 0.605 , 4.895 , 1.205 , 5.495 },
{ 1.21 , 4.895 , 1.81 , 5.495 },
{ 1.815 , 4.895 , 2.415 , 5.495 },
{ 0.0 , 5.5 , 0.6 , 6.098 },
{ 0.605 , 5.5 , 1.205 , 6.098 },
{ 1.21 , 5.5 , 1.81 , 6.098 },
{ 1.815 , 5.5 , 2.415 , 6.098 },
{ 3.64 , 3.08 , 4.24 , 3.68 },
{ 4.245 , 3.08 , 4.664 , 3.68 },
{ 3.64 , 3.685 , 4.24 , 4.285 },
{ 4.245 , 3.685 , 4.664 , 4.285 },
{ 3.035 , 4.29 , 3.635 , 4.89 },
{ 3.64 , 4.29 , 4.24 , 4.89 },
{ 4.245 , 4.29 , 4.664 , 4.89 },
{ 2.63 , 4.895 , 3.03 , 5.495 },
{ 3.035 , 4.895 , 3.635 , 5.495 },
{ 3.64 , 4.895 , 4.24 , 5.495 },
{ 4.245 , 4.895 , 4.664 , 5.495 },
{ 3.035 , 5.5 , 3.635 , 6.098 },
{ 3.64 , 5.5 , 4.24 , 6.098 },
{ 4.245 , 5.5 , 4.664 , 6.098 }
};

--const double tiles_coords2_52[4]={ 4.235 , 2.365 , 4.651 , 2.965 };
tiles_coords2_52={ 4.235 , 2.365 , 4.651 , 2.965 };

--const double tiles_x0y0[104][2]={
tiles_x0y0={
{0.000000,-0.055000},
{0.605000,-0.055000},
{1.210000,-0.055000},
{1.815000,-0.055000},
{2.420000,-0.055000},
{3.025000,-0.055000},
{3.630000,-0.055000},
{4.235000,-0.055000},
{4.840000,-0.055000},
{5.445000,-0.055000},
{6.050000,-0.055000},
{0.000000,0.550000},
{0.605000,0.550000},
{1.210000,0.550000},
{1.815000,0.550000},
{2.420000,0.550000},
{3.025000,0.550000},
{3.630000,0.550000},
{4.235000,0.550000},
{4.840000,0.550000},
{5.445000,0.550000},
{6.050000,0.550000},
{0.000000,1.155000},
{0.605000,1.155000},
{1.210000,1.155000},
{1.815000,1.155000},
{2.420000,1.155000},
{3.025000,1.155000},
{3.630000,1.155000},
{4.235000,1.155000},
{4.840000,1.155000},
{5.445000,1.155000},
{6.050000,1.155000},
{0.000000,1.760000},
{0.605000,1.760000},
{1.210000,1.760000},
{1.815000,1.760000},
{2.420000,1.760000},
{3.025000,1.760000},
{3.630000,1.760000},
{4.235000,1.760000},
{4.840000,1.760000},
{5.445000,1.760000},
{6.050000,1.760000},
{0.000000,2.365000},
{0.605000,2.365000},
{1.210000,2.365000},
{1.815000,2.365000},
{2.420000,2.365000},
{3.025000,2.365000},
{3.630000,2.365000},
{4.235000,2.365000},
{4.840000,2.365000},
{5.445000,2.365000},
{6.050000,2.365000},
{4.840000,2.970000},
{5.445000,2.970000},
{6.050000,2.970000},
{4.840000,3.575000},
{5.445000,3.575000},
{6.050000,3.575000},
{4.840000,4.180000},
{5.445000,4.180000},
{6.050000,4.180000},
{4.840000,4.785000},
{5.445000,4.785000},
{6.050000,4.785000},
{4.840000,5.390000},
{5.445000,5.390000},
{6.050000,5.390000},
{0.000000,3.080000},
{0.605000,3.080000},
{1.210000,3.080000},
{1.815000,3.080000},
{0.000000,3.685000},
{0.605000,3.685000},
{1.210000,3.685000},
{1.815000,3.685000},
{0.000000,4.290000},
{0.605000,4.290000},
{1.210000,4.290000},
{1.815000,4.290000},
{0.000000,4.895000},
{0.605000,4.895000},
{1.210000,4.895000},
{1.815000,4.895000},
{0.000000,5.500000},
{0.605000,5.500000},
{1.210000,5.500000},
{1.815000,5.500000},
{3.640000,3.080000},
{4.245000,3.080000},
{3.640000,3.685000},
{4.245000,3.685000},
{3.035000,4.290000},
{3.640000,4.290000},
{4.245000,4.290000},
{2.430000,4.895000},
{3.035000,4.895000},
{3.640000,4.895000},
{4.245000,4.895000},
{3.035000,5.500000},
{3.640000,5.500000},
{4.245000,5.500000}};

--const int tiles_neighbors[104][4]={
tiles_neighbors={
{12,2,-1,-1},
{13,3,-1,1},
{14,4,-1,2},
{15,5,-1,3},
{16,6,-1,4},
{17,7,-1,5},
{18,8,-2,6},
{19,9,-2,7},
{20,10,-2,8},
{21,11,-2,9},
{22,-1,-1,10},
{23,13,1,-2},
{24,14,2,12},
{25,15,3,13},
{26,16,4,14},
{27,17,5,15},
{28,18,6,16},
{29,19,7,17},
{30,20,8,18},
{31,21,9,19},
{32,22,10,20},
{33,-1,11,21},
{34,24,12,-2},
{35,25,13,23},
{36,26,14,24},
{37,27,15,25},
{38,28,16,26},
{39,29,17,27},
{40,30,18,28},
{41,31,19,29},
{42,32,20,30},
{43,33,21,31},
{44,-1,22,32},
{45,35,23,-2},
{46,36,24,34},
{47,37,25,35},
{48,38,26,36},
{49,39,27,37},
{50,40,28,38},
{51,41,29,39},
{52,42,30,40},
{53,43,31,41},
{54,44,32,42},
{55,-1,33,43},
{-1,46,34,-1},
{72,47,35,45},
{-1,48,36,46},
{-1,49,37,47},
{-1,50,38,48},
{-1,51,39,49},
{91,52,40,50},
{-1,-1,41,51},
{56,54,42,-1},
{57,55,43,53},
{58,-1,44,54},
{59,57,53,-1},
{60,58,54,56},
{61,-1,55,57},
{62,60,56,-1},
{63,61,57,59},
{64,-2,58,60},
{65,63,59,-1},
{66,64,60,62},
{67,-2,61,63},
{68,66,62,-1},
{69,67,63,65},
{70,-2,64,66},
{-1,69,65,-1},
{-1,70,66,68},
{-1,-1,67,69},
{75,72,-1,-1},
{76,73,46,71},
{77,74,-1,72},
{78,-1,-1,73},
{79,76,71,-2},
{80,77,72,75},
{81,78,73,76},
{82,-1,74,77},
{83,80,75,-2},
{84,81,76,79},
{85,82,77,80},
{86,-1,78,81},
{87,84,79,-2},
{88,85,80,83},
{89,86,81,84},
{90,-1,82,85},
{-1,88,83,-1},
{-1,89,84,87},
{-1,90,85,88},
{-1,-1,86,89},
{93,92,51,-1},
{94,-1,-1,91},
{96,94,91,-1},
{97,-1,92,93},
{99,96,-1,-1},
{100,97,93,95},
{101,-1,94,96},
{-1,99,-1,-1},
{102,100,95,98},
{103,101,96,99},
{104,-1,97,100},
{-2,103,99,-1},
{-2,104,100,102},
{-1,-1,101,103} };

--const double sensors_xy[104][4][2]={
sensors_xy={
{ {0.578000,0.095000}, {0.578000,0.578000}, {0.022000,0.095000}, {0.022000,0.578000}},
{ {0.578000,0.095000}, {0.578000,0.578000}, {0.022000,0.095000}, {0.022000,0.578000}},
{ {0.578000,0.095000}, {0.578000,0.578000}, {0.022000,0.095000}, {0.022000,0.578000}},
{ {0.578000,0.095000}, {0.578000,0.578000}, {0.022000,0.095000}, {0.022000,0.578000}},
{ {0.578000,0.095000}, {0.578000,0.578000}, {0.022000,0.095000}, {0.022000,0.578000}},
{ {0.578000,0.095000}, {0.578000,0.578000}, {0.022000,0.095000}, {0.022000,0.578000}},
{ {0.578000,0.095000}, {0.578000,0.578000}, {0.022000,0.095000}, {0.022000,0.578000}},
{ {0.578000,0.095000}, {0.578000,0.578000}, {0.022000,0.095000}, {0.022000,0.578000}},
{ {0.578000,0.095000}, {0.578000,0.578000}, {0.022000,0.095000}, {0.022000,0.578000}},
{ {0.578000,0.095000}, {0.578000,0.578000}, {0.022000,0.095000}, {0.022000,0.578000}},
{ {0.578000,0.095000}, {0.578000,0.578000}, {0.022000,0.095000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.558000}, {0.022000,0.022000}, {0.022000,0.558000}},
{ {0.578000,0.022000}, {0.578000,0.558000}, {0.022000,0.022000}, {0.022000,0.558000}},
{ {0.578000,0.022000}, {0.578000,0.558000}, {0.022000,0.022000}, {0.022000,0.558000}},
{ {0.578000,0.022000}, {0.578000,0.558000}, {0.022000,0.022000}, {0.022000,0.558000}},
{ {0.578000,0.022000}, {0.578000,0.558000}, {0.022000,0.022000}, {0.022000,0.558000}},
{ {0.578000,0.022000}, {0.578000,0.558000}, {0.022000,0.022000}, {0.022000,0.558000}},
{ {0.578000,0.022000}, {0.578000,0.558000}, {0.022000,0.022000}, {0.022000,0.558000}},
{ {0.578000,0.022000}, {0.397000,0.564000}, {0.022000,0.022000}, {0.022000,0.558000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.024000}, {0.578000,0.578000}, {0.022000,0.026000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.568000}, {0.022000,0.022000}, {0.022000,0.568000}},
{ {0.578000,0.022000}, {0.578000,0.568000}, {0.022000,0.022000}, {0.022000,0.568000}},
{ {0.578000,0.022000}, {0.578000,0.568000}, {0.022000,0.022000}, {0.022000,0.568000}},
{ {0.578000,0.029000}, {0.578000,0.578000}, {0.022000,0.030000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}},
{ {0.578000,0.022000}, {0.578000,0.573000}, {0.022000,0.022000}, {0.022000,0.555000}},
{ {0.578000,0.022000}, {0.578000,0.578000}, {0.022000,0.022000}, {0.022000,0.578000}}};

--const int tiles_state[104]={
tiles_state={
1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 0, 1, 1, 0, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 0, 0, 1, 1, 1, 1, 0, 1, 0, 1, 1, 0, 0, 1, 1, 0, 0, 1, 0};


setFloor=function()
  local lhandle = {}
  for i=0,math.ceil(wM),1 do
    for j=0,math.ceil(hM),1 do
      local floor_tile = simCreatePureShape(0,bCode,{1,1,0.00000018},0,nil)
      lhandle[#lhandle+1] = floor_tile
      simSetObjectPosition(floor_tile,-1,{i-wM/2,j-hM/2,0.00000015})
    end
  end
  local gHandle = simGroupShapes(lhandle)
  simSetObjectName(gHandle,'floor')
  simSetShapeColor(gHandle,nil,0,floor_color)
  return gHandle
end

createTiles=function()
  --create tileDataUnit
  tileDataUnit = {}
  local sensorId = {'_SE','_NE','_SW','_NW'}
  for i,coords in ipairs(tiles_coord) do
      local xmin, ymin, xmax, ymax = coords[1],coords[2],coords[3],coords[4]
      local width, height = xmax-xmin, ymax-ymin
      local coord = tiles_x0y0[i]
      local x0, y0 = math.max(coord[1],0) + width/2, math.max(coord[2],0) + height/2
      
      --tile data unit    
      tileDataUnit[i] = {
        ['pos']={x0,y0},
        ['frame_id']=-1,
        ['unix_time']=-1,
        ['idSE']=i..sensorId[1],
        ['idNE']=i..sensorId[2],
        ['idSW']=i..sensorId[3],
        ['idNW']=i..sensorId[4],
        ['width']=width,
        ['height']=height
      }
  end

  --create sensorDataUnit
  sensorDataUnit = {}
  for i, sensorsI in ipairs(sensors_xy) do
    local xI, yI = tiles_x0y0[i][1], tiles_x0y0[i][2]
    for j, sensorIJ in ipairs(sensorsI) do
      local x, y = xI+sensorIJ[1], yI+sensorIJ[2]
      
      --sensor data unit
      local id = i..sensorId[j]
      sensorDataUnit[id] = {
        ['pos']={x,y},
        ['value']=0,
        ['i']=i,
        ['j']=j,
        ['id']=sensorId[j]
      }
    end
  end
    
  --create ledtodo
  
  -----------
  ---MODEL---
  -----------
  
  --model tile
  local rectangles = {}
  for i, v in ipairs(tileDataUnit) do
    local width, height, pos = v['width'],v['height'],v['pos']
    local handle = simCreatePureShape(0,bCode,{width,height,tile_height},0,nil)
    simSetObjectPosition(handle,-1,{pos[1],pos[2],0})
    rectangles[i] = handle
  end
  
  --model sensor
  local sensors = {}
  for k, v in pairs(sensorDataUnit) do
    local i,j,pos = v['i'],v['j'],v['pos']
    local handle = simCreatePureShape(0,bCode,sensor_size,0,nil)
    simSetObjectName(handle,"sensor_"..i.."_"..j)
    simSetObjectPosition(handle, -1, {pos[1],pos[2],-tile_height/2})
    simSetObjectParent(handle,rectangles[i],true)
    if sensors[i] == nil then
      sensors[i] = {}
    end
    sensors[i][j] = handle
  end
      
  --tiles
  local tiles = {}
  for i, rectangleI in ipairs(rectangles) do
      local groupI = {rectangleI}
      for j, sensorIJ in ipairs(sensors[i]) do
        table.insert(groupI,#groupI+1,sensorIJ)
      end
      local tileI = simGroupShapes(groupI)
      simSetObjectName(tileI,'Tile_'..i)
      table.insert(tiles,i,tileI)
  end
  
  --usable/unusable tiles
  usable_tiles, unusable_tiles = {}, {}
  for i, tileI in ipairs(tiles) do
    if tiles_state[i] == 1 then
      usable_tiles[#usable_tiles+1] = tileI
    else
      unusable_tiles[#unusable_tiles+1] = tileI 
    end
  end
  
  --floor
  uHandles = simGroupShapes(usable_tiles)
  simSetObjectName(uHandles,'usable_floor')
  simSetShapeColor(uHandles,nil,0,floor_color)
  
  unuHandles = simGroupShapes(unusable_tiles)
  simSetObjectName(unuHandles,'unusable_floor')
  simSetShapeColor(unuHandles,nil,0,unusable_color)
  
  simRemoveObjectFromSelection(sim_handle_all)
end

setSensorMapping=function(topic)
  simSetStringSignal("tile_data_agg","")
  local sub = simExtROS_enableSubscriber(topic,1,simros_strmcmd_set_string_signal,-1,-1,"tile_data_agg" )
end

cutRaw=function(rawLine)
  local ipPattern="%d+.%d.%d+.(%d+)"
  local gaugePattern="Gauge"
  local sepPattern="%s"
  local frameIdPattern="(%d+)"
  local unixTimePattern="(%d+)"
  local sensorPattern="(%d+)"
  local id, frame_id, unix_time, sensorSE, sensorNE, sensorSW, sensorNW = string.match(rawLine,"Gauge %d+.%d+.%d+.(%d+) (%d+) (%d+) (%d+) (%d+) (%d+) (%d+)")
  --[[
  print('id '..id)
  print('frame_id '..frame_id)
  print('unix_time '..unix_time)
  print('sensorSE '..sensorSE)
  print('sensorNE '..sensorNE)
  print('sensorSW '..sensorSW)
  print('sensorNW '..sensorNW)
  --]]
end

updateTile=function(rawLine)
  --parse raw data
  local id, frame_id, unix_time, sensorValSE, sensorValNE, sensorValSW, sensorValNW = string.match(rawLine,"Gauge %d+.%d+.%d+.(%d+) (%d+) (%d+) (%d+) (%d+) (%d+) (%d+)")
  
  --update tile
  local i = tonumber(id)
  tileDataUnit[i]['frame_id']=frame_id
  tileDataUnit[i]['unix_time']=unix_time
    
  --update sensors
  local sensorId = {i..'_SE',i..'_NE',i..'_SW',i..'_NW'}
  local sensorVal = {sensorValSE,sensorValNE,sensorValSW,sensorValNW}
  for i, id in ipairs(sensorId) do
    local aval = sensorDataUnit[id]['value']
    sensorDataUnit[id]['value']=sensorVal[i]--0.01*aval + 0.99*sensorVal[i]
  end
end

storeTileData=function()
  if tileDataUnit == nil then
    tileDataUnit = {}
    sensorDataUnit = {}
  end
  data = simGetStringSignal("tile_data_agg")
  if (data) then
    for line in string.gmatch(data, "[^\n]+") do  
      updateTile(line)
    end
  end
end

drawTileData=function()
  --sensor drawing
  local nbVal = #usable_tiles * 4
  if drawingSensor == nil then
    drawingSensor = simAddDrawingObject(sim_drawing_quadpoints+sim_drawing_itemcolors,0.12,0.0,-1,nbVal,nil,nil,nil,nil)
  else
    simRemoveDrawingObject(drawingSensor)
    drawingSensor = simAddDrawingObject(sim_drawing_quadpoints+sim_drawing_itemcolors,0.12,0.0,-1,nbVal,nil,nil,nil,nil)
  end

  local dX,dY,value,zeroV,r,g,b=0.15,0.15,0,0,0,0,0
  local du = {{-dX,dY},{-dX,-dY},{dX,dY},{dX,-dY}}
  
  for k,v in pairs(sensorDataUnit) do
    local i, j = v['i'], v['j']
    if tiles_state[i] == 1 then
      dX,dY=du[j][1],du[j][2]
            
      --position
      local pos = v['pos']
      local x, y, z = pos[1]+dX, pos[2]+dY, tile_height
      
      --color
      local t_id = tostring(i)
      if zerosNew[t_id] ~= nil then
        if zerosNew[t_id][j]~= nil then
          r,g,b  = floor_color[1],floor_color[2],floor_color[3]
          zeroV = zerosNew[t_id][j]
          value = (tonumber(v['value']) - zeroV)/weight_slope
          if value > 2 then
            r,g,b = r+(1-r)*math.min(value,50)/50,g+(1-g)*math.min(value,50)/50,b+(1-b)*math.min(value,50)/50
          end 
          simAddDrawingObjectItem(drawingSensor,{x;y;z;0;0;1;r;g;b})
        end
      end
    end
  end
end

if (simGetScriptExecutionCount()==0) then
  weight_slope = 7.4907
  tile_height = 0.035
  sensor_size = {0.025,0.025,0.02}
  floor_color  = {0,0,0}
  unusable_color = {0.5,0.5,0.5}
  bCode = 29+2
  createTiles()
  
  -- Check if the required plugin is there (libv_repExtRos.so or libv_repExtRos.dylib):
  local moduleName=0
  local moduleVersion=0
  local index=0
  local pluginNotFound=true
  while moduleName do
    moduleName,moduleVersion=simGetModuleName(index)
    if (moduleName=='Ros') then
      pluginNotFound=false
    end
    index=index+1
  end

  if (pluginNotFound) then
    -- Display an error message if the plugin was not found:
    simDisplayDialog('Error','ROS plugin was not found.&&nSimulation will not run properly',sim_dlgstyle_ok,false,nil,{0.8,0,0,0,0,0},{0.5,0,0,1,1,1})
  else
    setSensorMapping("/tile_data_aggregated")
  end  
end

simHandleChildScript(sim_handle_all_except_explicit)
  storeTileData()
  drawTileData()